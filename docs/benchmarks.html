<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-11-23T13:13:19.7828473"><meta name="build-number" content="${buildNumber}">       <title>Benchmarks | Opponent Search</title><script id="virtual-toc-data" type="application/json">[{"id":"invariants","level":0,"title":"Invariants","anchor":"#invariants"},{"id":"performance-analysis","level":0,"title":"Performance Analysis","anchor":"#performance-analysis"},{"id":"observations","level":0,"title":"Observations","anchor":"#observations"},{"id":"conclusion","level":0,"title":"Conclusion","anchor":"#conclusion"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Benchmarks | Opponent Search"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="Opponent Search Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="benchmarks.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Benchmarks | Opponent Search"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "benchmarks.html#webpage", "url": "benchmarks.html", "name": "Benchmarks | Opponent Search", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/#website", "url": "/", "name": "Opponent Search Help" }</script><!-- End Schema.org --> <!-- Mermaid light/dark themes -->  <link rel="stylesheet" type="text/css" href="mermaid.css">  </head>     <body data-id="Benchmarks" data-main-title="Benchmarks" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="OpponentSearch-Project.md|OpponentSearch Project"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Opponent Search  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Benchmarks"  id="Benchmarks.md"  >Benchmarks</h1>  <p id="732ec56c_8">This page covers the performance metrics of the algorithm at various scales and with a handful of optimizations enabled or disabled.</p><section class="chapter"><h2 id="invariants" data-toc="invariants">Invariants</h2><section class="chapter"><h3 id="hardware" data-toc="hardware">Hardware</h3><p id="732ec56c_9">AMD Ryzen 9 3900XT 12-Core Processor @ 3.79 GHz with 64 GB RAM</p></section><section class="chapter"><h3 id="development-editor-target" data-toc="development-editor-target">Development Editor Target</h3><p id="732ec56c_10">The game is compiled to run the Unreal editor and all testing was done using the Play in Editor mode.</p></section><section class="chapter"><h3 id="un-tuned-segment-sizes" data-toc="un-tuned-segment-sizes">Un-tuned Segment Sizes</h3><p id="732ec56c_11">All nav meshes were constructed with default parameters.</p></section></section><section class="chapter"><h2 id="performance-analysis" data-toc="performance-analysis">Performance Analysis</h2><p id="732ec56c_12">Stats are provided by the Unreal Insights tool. The goal of this analysis is to determine whether the needs of a game's design can be met within the upper bound across a variety of map sizes. The design question being asked is &quot;For a given level size, what is the maximum number of guards that can patrol at once and hold a mostly steady 60fps?&quot;</p><p id="732ec56c_13">The baseline of 3 is always present, so that this implementation can be compared with the performance in the original paper. The upper bound is determined by the number of guards, discovered through experimentation.</p><section class="chapter"><h3 id="no-optimizations" data-toc="no-optimizations">No Optimizations</h3><div class="table-wrapper" ><table class="wide" id="732ec56c_14"  ><thead><tr class="ijRowHead" id="732ec56c_15"><th id="732ec56c_16"><p>Map Area (m<sup class="superscript" id="732ec56c_17">2</sup>)</p></th><th id="732ec56c_18"><p>Number of Segments</p></th><th id="732ec56c_19"><p>Test Category</p></th><th id="732ec56c_20"><p>Number of Search Agents</p></th><th id="732ec56c_21"><p>Decision Time (ms)</p></th><th id="732ec56c_22"><p>Worst FPS</p></th></tr></thead><tbody ><tr id="732ec56c_23"><td id="732ec56c_24"><p>256</p></td><td id="732ec56c_25"><p>202</p></td><td id="732ec56c_26"><p>Baseline</p></td><td id="732ec56c_27"><p>3</p></td><td id="732ec56c_28"><p>1.39</p></td><td id="732ec56c_29"><p>60</p></td></tr><tr id="732ec56c_30"><td id="732ec56c_31"><p>256</p></td><td id="732ec56c_32"><p>202</p></td><td id="732ec56c_33"><p>Upper Bound</p></td><td id="732ec56c_34"><p>15</p></td><td id="732ec56c_35"><p>18.23</p></td><td id="732ec56c_36"><p>58</p></td></tr><tr id="732ec56c_37"><td id="732ec56c_38"><p>1000</p></td><td id="732ec56c_39"><p>327</p></td><td id="732ec56c_40"><p>Baseline</p></td><td id="732ec56c_41"><p>3</p></td><td id="732ec56c_42"><p>9.7</p></td><td id="732ec56c_43"><p>60</p></td></tr><tr id="732ec56c_44"><td id="732ec56c_45"><p>1000</p></td><td id="732ec56c_46"><p>327</p></td><td id="732ec56c_47"><p>Upper Bound</p></td><td id="732ec56c_48"><p>5</p></td><td id="732ec56c_49"><p>18.22</p></td><td id="732ec56c_50"><p>58</p></td></tr><tr id="732ec56c_51"><td id="732ec56c_52"><p>4,000</p></td><td id="732ec56c_53"><p>716</p></td><td id="732ec56c_54"><p>Baseline</p></td><td id="732ec56c_55"><p>3</p></td><td id="732ec56c_56"><p>61.10</p></td><td id="732ec56c_57"><p>55</p></td></tr></tbody ></table ></div><p id="732ec56c_58">With no optimizations, the smallest level performs well up to 15 guards. At this point, any time a guard makes a decision, which is roughly every 10-15 seconds or so, framerate dips are guaranteed.</p><p id="732ec56c_59">The medium level's baseline is acceptable, but very quickly has performance issues where even a small number of guards leads to dropped frames whenever a guard picks a direction.</p><p id="732ec56c_60">The large level has framerate issues even at baseline. With this small number of guards the number of times a decision is made is infrequent, but it is a steep cost of 4-5 frames.</p></section><section class="chapter"><h3 id="with-distance-heuristic" data-toc="with-distance-heuristic">With Distance Heuristic</h3><div class="table-wrapper" ><table class="wide" id="732ec56c_61"  ><thead><tr class="ijRowHead" id="732ec56c_62"><th id="732ec56c_63"><p>Map Area (m<sup class="superscript" id="732ec56c_64">2</sup>)</p></th><th id="732ec56c_65"><p>Number of Segments</p></th><th id="732ec56c_66"><p>Test Category</p></th><th id="732ec56c_67"><p>Number of Search Agents</p></th><th id="732ec56c_68"><p>Decision Time (ms)</p></th><th id="732ec56c_69"><p>Worst FPS</p></th></tr></thead><tbody ><tr id="732ec56c_70"><td id="732ec56c_71"><p>256</p></td><td id="732ec56c_72"><p>202</p></td><td id="732ec56c_73"><p>Baseline</p></td><td id="732ec56c_74"><p>3</p></td><td id="732ec56c_75"><p>1.25</p></td><td id="732ec56c_76"><p>60</p></td></tr><tr id="732ec56c_77"><td id="732ec56c_78"><p>256</p></td><td id="732ec56c_79"><p>202</p></td><td id="732ec56c_80"><p>Old Upper Bound</p></td><td id="732ec56c_81"><p>15</p></td><td id="732ec56c_82"><p>4.13</p></td><td id="732ec56c_83"><p>60</p></td></tr><tr id="732ec56c_84"><td id="732ec56c_85"><p>256</p></td><td id="732ec56c_86"><p>202</p></td><td id="732ec56c_87"><p>New Upper Bound</p></td><td id="732ec56c_88"><p>45 (3x increase)</p></td><td id="732ec56c_89"><p>14.24</p></td><td id="732ec56c_90"><p>60</p></td></tr><tr id="732ec56c_91"><td id="732ec56c_92"><p>1000</p></td><td id="732ec56c_93"><p>327</p></td><td id="732ec56c_94"><p>Baseline</p></td><td id="732ec56c_95"><p>3</p></td><td id="732ec56c_96"><p>6.78</p></td><td id="732ec56c_97"><p>60</p></td></tr><tr id="732ec56c_98"><td id="732ec56c_99"><p>1000</p></td><td id="732ec56c_100"><p>327</p></td><td id="732ec56c_101"><p>Old Upper Bound</p></td><td id="732ec56c_102"><p>5</p></td><td id="732ec56c_103"><p>11.09</p></td><td id="732ec56c_104"><p>60</p></td></tr><tr id="732ec56c_105"><td id="732ec56c_106"><p>1000</p></td><td id="732ec56c_107"><p>327</p></td><td id="732ec56c_108"><p>New Upper Bound</p></td><td id="732ec56c_109"><p>11 (2.25x increase)</p></td><td id="732ec56c_110"><p>15.02</p></td><td id="732ec56c_111"><p>59</p></td></tr><tr id="732ec56c_112"><td id="732ec56c_113"><p>4,000</p></td><td id="732ec56c_114"><p>716</p></td><td id="732ec56c_115"><p>Baseline</p></td><td id="732ec56c_116"><p>3</p></td><td id="732ec56c_117"><p>57.57</p></td><td id="732ec56c_118"><p>55</p></td></tr></tbody ></table ></div><p id="732ec56c_119">As expected, the baseline performance for each level doesn't change much with the distance heuristic.</p><p id="732ec56c_120">The upper bound for the small level is now 45 guards, which is well above any typical gameplay design's needs.</p><p id="732ec56c_121">The medium level can now support 11 guards without framerate issues, which is above typical designs but potentially below particularly guard heavy sequences.</p><p id="732ec56c_122">The large level is still not viable without framerate issues.</p></section><section class="chapter"><h3 id="with-cached-path-amortization" data-toc="with-cached-path-amortization">With Cached Path Amortization</h3><p id="732ec56c_123">Keep in mind that the decision time is amortized. The correct way to interpret this is &quot;how much time per frame is spent on pathfinding.&quot;</p><div class="table-wrapper" ><table class="wide" id="732ec56c_124"  ><thead><tr class="ijRowHead" id="732ec56c_125"><th id="732ec56c_126"><p>Map Area (m<sup class="superscript" id="732ec56c_127">2</sup>)</p></th><th id="732ec56c_128"><p>Number of Segments</p></th><th id="732ec56c_129"><p>Test Category</p></th><th id="732ec56c_130"><p>Number of Search Agents</p></th><th id="732ec56c_131"><p>Decision Time (ms)</p></th><th id="732ec56c_132"><p>Worst FPS</p></th><th id="732ec56c_133"><p>Amortization Time Window (s)</p></th></tr></thead><tbody ><tr id="732ec56c_134"><td id="732ec56c_135"><p>256</p></td><td id="732ec56c_136"><p>202</p></td><td id="732ec56c_137"><p>Baseline</p></td><td id="732ec56c_138"><p>3</p></td><td id="732ec56c_139"><p>0.01</p></td><td id="732ec56c_140"><p>60</p></td><td id="732ec56c_141"><p>1</p></td></tr><tr id="732ec56c_142"><td id="732ec56c_143"><p>256</p></td><td id="732ec56c_144"><p>202</p></td><td id="732ec56c_145"><p>Upper Bound</p></td><td id="732ec56c_146"><p>109</p></td><td id="732ec56c_147"><p>15.68</p></td><td id="732ec56c_148"><p>60</p></td><td id="732ec56c_149"><p>10</p></td></tr><tr id="732ec56c_150"><td id="732ec56c_151"><p>1000</p></td><td id="732ec56c_152"><p>327</p></td><td id="732ec56c_153"><p>Baseline</p></td><td id="732ec56c_154"><p>3</p></td><td id="732ec56c_155"><p>0.06</p></td><td id="732ec56c_156"><p>60</p></td><td id="732ec56c_157"><p>1</p></td></tr><tr id="732ec56c_158"><td id="732ec56c_159"><p>1000</p></td><td id="732ec56c_160"><p>327</p></td><td id="732ec56c_161"><p>Upper Bound</p></td><td id="732ec56c_162"><p>98</p></td><td id="732ec56c_163"><p>15.32</p></td><td id="732ec56c_164"><p>60</p></td><td id="732ec56c_165"><p>10</p></td></tr><tr id="732ec56c_166"><td id="732ec56c_167"><p>4,000</p></td><td id="732ec56c_168"><p>716</p></td><td id="732ec56c_169"><p>Baseline</p></td><td id="732ec56c_170"><p>3</p></td><td id="732ec56c_171"><p>0.51</p></td><td id="732ec56c_172"><p>60</p></td><td id="732ec56c_173"><p>1</p></td></tr><tr id="732ec56c_174"><td id="732ec56c_175"><p>4,000</p></td><td id="732ec56c_176"><p>716</p></td><td id="732ec56c_177"><p>Upper Bound</p></td><td id="732ec56c_178"><p>50</p></td><td id="732ec56c_179"><p>15.81</p></td><td id="732ec56c_180"><p>60</p></td><td id="732ec56c_181"><p>10</p></td></tr></tbody ></table ></div><p id="732ec56c_182">As expected, the amortized baseline performance for each level improves by 2 orders of magnitude with even a short window of 1s.</p><p id="732ec56c_183">All levels can now support more guards than would ever be used by game designs and hold a steady 60fps, but at the cost of a constant framerate overhead. At these upper bounds, in practice the only thing the game can do is run pathfinding.</p></section><section class="chapter"><h3 id="with-max-distance-heuristic" data-toc="with-max-distance-heuristic">With Max Distance Heuristic</h3><p id="732ec56c_184">The max distance heuristic is still experimental, but it shows promise. Setting the max distance to 40m allowed 15 guards to patrol the 4000m<sup class="superscript" id="732ec56c_185">2</sup> map at 60 fps without amortization. With amortization, 75 guards were able to patrol the 4000m<sup class="superscript" id="732ec56c_186">2</sup> map, albeit with inconsistent FPS ranging from 40-60 the whole time. For the 256 m<sup class="superscript" id="732ec56c_187">2</sup> map and a max distance of 16m, the decision time for 3 guards was reduced to 0.52ms with no notable change to guard behavior.</p></section></section><section class="chapter"><h2 id="observations" data-toc="observations">Observations</h2><ol class="list _decimal" id="732ec56c_188"  type="1"  ><li class="list__item" id="732ec56c_189"><p>The implementation broadly matches the benchmarks provided in the paper</p></li><li class="list__item" id="732ec56c_190"><p>The distance heuristic check is essentially free and required to scale up for medium-sized maps</p></li><li class="list__item" id="732ec56c_191"><p>Large maps require cached path amortization and/or the max distance heuristic</p></li></ol></section><section class="chapter"><h2 id="conclusion" data-toc="conclusion">Conclusion</h2><p id="732ec56c_192">The algorithm is performant for the vast majority of gameplay purposes. Observing popular games with optional or required stealth mechanics, there are very few situations where the design calls for more than 5 guards on patrol in a level. Sequences with many enemies typically have a mixture of guards patrolling or standing still doing some miscellaneous activity. There are many options for tuning the algorithm for performance, the majority haven't been explored yet by this project. Gameplay engineers should feel confident that they can use this algorithm in their games.</p></section><div class="last-modified"> Last modified: 23 November 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="optimizations.html">Optimizations</a>   <a class="navigation-links__next" href="plugins.html">Plugins</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.js"></script></body></html>