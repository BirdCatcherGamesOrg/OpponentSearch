<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-11-25T13:37:55.5893848"><meta name="build-number" content="${buildNumber}">       <title>Design Patterns | Opponent Search</title><script id="virtual-toc-data" type="application/json">[{"id":"components","level":0,"title":"Components","anchor":"#components"},{"id":"lifecycles-and-instantiation-order","level":0,"title":"Lifecycles and Instantiation Order","anchor":"#lifecycles-and-instantiation-order"},{"id":"developer-settings","level":0,"title":"Developer Settings","anchor":"#developer-settings"},{"id":"reference-implementations","level":0,"title":"Reference Implementations","anchor":"#reference-implementations"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Design Patterns | Opponent Search"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="Opponent Search Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="design-patterns.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Design Patterns | Opponent Search"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "design-patterns.html#webpage", "url": "design-patterns.html", "name": "Design Patterns | Opponent Search", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/#website", "url": "/", "name": "Opponent Search Help" }</script><!-- End Schema.org --> <!-- Mermaid light/dark themes -->  <link rel="stylesheet" type="text/css" href="mermaid.css">  </head>     <body data-id="Design-Patterns" data-main-title="Design Patterns" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Plugins.md|Plugins///BCIPlugins.md|BCIPlugins"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Opponent Search  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Design-Patterns"  id="Design-Patterns.md"  >Design Patterns</h1>  <section class="chapter"><h2 id="components" data-toc="components">Components</h2><p id="17d6863a_7710">The BCI Plugins are inspired by the SOLID principles used by mainstream software engineering. This approach makes heavy use of composition by deriving classes from UActorComponent's (or children thereof) and adding them to any AActors instead of deriving from AActor's. This does result in gameplay logic spreading out across a large number of components, but each component tends to be very small in scope and lines of code.</p><p id="17d6863a_7711">BCI components differ from the standard Unreal approach for managing dependencies. A &quot;SetDependencies&quot; method is provided which will take in references to other objects. The typical approach would be for the Component to invoke a &quot;FindComponent&quot; method on its owning AActor, but this obfuscates the dependencies of a component and potentially opens up AccessViolations at runtime if components are missing. The contract for a BCI component is that once SetDependencies is invoked, the component may be used, but not before then. This also moves the responsibility of initialization order onto the owning AActor which is more flexible overall.</p><p id="17d6863a_7712">The second way major that BCI components differ is the use of native child components. In most situations, a component may only be used by 1 other component on an AActor. Components will instantiate child components instead of relying on the AActor to inject the entire dependency tree. Native child components is not an officially supported feature in Unreal. However, this approach has worked for many years, so it's safe to assume it will continue to work. If this breaks in the future, it is possible to unroll the child components to be injected from the AActor, so it's not something fixed in stone.</p></section><section class="chapter"><h2 id="lifecycles-and-instantiation-order" data-toc="lifecycles-and-instantiation-order">Lifecycles and Instantiation Order</h2><p id="17d6863a_7713">BCI Plugin components will try to initialize as much dependency logic as possible, and as early as possible, in the UObject lifecycle. AActors will still need to invoke SetDependencies for some components, but they will have the flexibility for when to make that call.</p><section class="chapter"><h3 id="component-cdo-constructor" data-toc="component-cdo-constructor">Component CDO Constructor</h3><p id="17d6863a_7714">Components can instantiate children with CreateDefaultSubobject here. Little else is done in the constructor.</p></section><section class="chapter"><h3 id="register" data-toc="register">Register</h3><p id="17d6863a_7715">Child components created in the constructor will have their &quot;RegisterComponent&quot; methods called, finishing initialization on the AActor's component tree. Additionally, USceneComponents are attached with AttachToComponent. Nothing else should be done during Registration.</p></section><section class="chapter"><h3 id="initializecomponent" data-toc="initializecomponent">InitializeComponent</h3><p id="17d6863a_7716">Some components will use InitializeComponent to perform any misc. initialization code that can be done early. For example:</p><ul class="list _ul" id="17d6863a_7717"    ><li class="list__item" id="17d6863a_7718"><p>Read CVars</p></li><li class="list__item" id="17d6863a_7719"><p>Read from UDeveloperSettings</p></li><li class="list__item" id="17d6863a_7720"><p>Call methods on USubsystems</p></li><li class="list__item" id="17d6863a_7721"><p>SetDependencies on child components if possible</p></li></ul></section><section class="chapter"><h3 id="setdependencies" data-toc="setdependencies">SetDependencies</h3><p id="17d6863a_7722">The SetDependencies method is generally used for any components that are reused in multiple BCI components, or for things that bind very late entities like AActors that aren't the owner. For example:</p><ul class="list _ul" id="17d6863a_7723"    ><li class="list__item" id="17d6863a_7724"><p>UAbilitySystemComponent</p></li><li class="list__item" id="17d6863a_7725"><p>UCliqueHandler</p></li><li class="list__item" id="17d6863a_7726"><p>Possessed pawns of an AController</p></li><li class="list__item" id="17d6863a_7727"><p>UWidgetTree's for UI elements</p></li></ul><p id="17d6863a_7728">Ideally SetDependencies can be called during PostInitializeComponents on an AActor, but it can be called at any time since it's not coupled to a specific lifecycle or instantiating order.</p><p id="17d6863a_7729">In the end, the vast majority of BCI components can be fully initialized before BeginPlay is called, leaving room for AActors to perform typical BeginPlay logic without worrying about the state of these components.</p></section></section><section class="chapter"><h2 id="developer-settings" data-toc="developer-settings">Developer Settings</h2></section><section class="chapter"><h2 id="reference-implementations" data-toc="reference-implementations">Reference Implementations</h2></section><div class="last-modified"> Last modified: 25 November 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="bciplugins.html">BCIPlugins</a>   <a class="navigation-links__next" href="bcicinematiccamera.html">BCICinematicCamera</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.js"></script></body></html>