<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-11-25T13:37:55.5933846"><meta name="build-number" content="${buildNumber}">       <title>Optimizations | Opponent Search</title><script id="virtual-toc-data" type="application/json">[{"id":"supported","level":0,"title":"Supported","anchor":"#supported"},{"id":"unsupported","level":0,"title":"Unsupported","anchor":"#unsupported"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Optimizations | Opponent Search"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="Opponent Search Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="optimizations.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Optimizations | Opponent Search"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "optimizations.html#webpage", "url": "optimizations.html", "name": "Optimizations | Opponent Search", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/#website", "url": "/", "name": "Opponent Search Help" }</script><!-- End Schema.org --> <!-- Mermaid light/dark themes -->  <link rel="stylesheet" type="text/css" href="mermaid.css">  </head>     <body data-id="Optimizations" data-main-title="Optimizations" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="OpponentSearch-Project.md|OpponentSearch Project///Implementation.md|Implementation"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Opponent Search  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Optimizations"  id="Optimizations.md"  >Optimizations</h1>  <p id="637badd9_6884">The bottleneck for this algorithm is calculating the minimum path length for all guards.</p><section class="chapter"><h2 id="supported" data-toc="supported">Supported</h2><section class="chapter"><h3 id="guard-min-distance-heuristic" data-toc="guard-min-distance-heuristic">Guard Min Distance Heuristic</h3><p id="637badd9_6885">This optimization adds a fast heuristic before calculating the path length for a guard such that only guards with a Euclidean distance lower than the current min will be considered.</p></section><section class="chapter"><h3 id="cached-path-amortization" data-toc="cached-path-amortization">Cached Path Amortization</h3><p id="637badd9_6886">This optimization computes the guard min for a subset of segments every frame over a configurable time window. When a search agent needs to determine its next segment, the path will be pulled from the cache. This approach has two drawbacks:</p><ol class="list _decimal" id="637badd9_6887"  type="1"  ><li class="list__item" id="637badd9_6888"><p>A fixed amount of CPU time every frame will be spent on computing guard mins</p></li><li class="list__item" id="637badd9_6889"><p>Long time windows compute suboptimal paths</p></li></ol><p id="637badd9_6890">The impact to path accuracy varies with the move speed of the search agents, the length of the window and the size of segments. For example, a 10s window with guards moving 2mps will be inaccurate by as much as 20 meters. This usually spans 2-3 segments which is enough to have measurable impact to the average staleness of segments and degrades guard behavior by having them group up, rotate 180 degrees and more.</p><p id="637badd9_6891">In practice, when there are a large number of guards on a large map, the impact to gameplay is insignificant because there is enough space for guards to walk past each other and pick far apart segments.</p></section><section class="chapter"><h3 id="max-distance-heuristic-not-fully-implemented" data-toc="max-distance-heuristic-not-fully-implemented">Max Distance Heuristic (Not Fully Implemented)</h3><p id="637badd9_6892">This optimization adds a fast heuristic before calculating the fitness function for a given segment where the guard min for a segment is only computed if the Euclidean distance between the requester and the segment is lower than some threshold. This optimization should allow guards to run on large maps with little change in the observed behavior. Note that on small maps, this heuristic adds little benefit but can cause a dramatic regression in guard behavior. This optimization is a candidate for 1st class support in this project, but more work needs to be done to finetune the cutoff distance and provide an objective evaluation of the behavioral impact to guard patrol routes.</p></section><section class="chapter"><h3 id="180-degree-pruning-not-implemented" data-toc="180-degree-pruning-not-implemented">180 Degree Pruning (Not Implemented)</h3><p id="637badd9_6893">This optimization would be to do partial paths for a short distance and only pick the start of paths which don't require a 180-degree turn. This change is incompatible with cached path amortization, so it wasn't explored yet.</p></section><section class="chapter"><h3 id="cached-path-with-ttl-not-implemented" data-toc="cached-path-with-ttl-not-implemented">Cached Path with TTL (Not Implemented)</h3><p id="637badd9_6894">This optimization caches the paths for a short period of time from previous fitness function computations. This should yield similar results as the amortized optimization, and with similar drawbacks, but without the overhead of running pathfinding on every single frame.</p></section></section><section class="chapter"><h2 id="unsupported" data-toc="unsupported">Unsupported</h2><p id="637badd9_6895">These are identified optimizations that are recommended not to do.</p><section class="chapter"><h3 id="async-pathfinding" data-toc="async-pathfinding">Async Pathfinding</h3><p id="637badd9_6896">It is highly unlikely that Unreal will ever support async pathfinding for myriad reasons. Community supported async pathfinding implementations exist, but it's unclear how well they integrate with Unreal's native navigation system, libraries built on top of that, or stability on consoles. Therefore, async path finding is not supported by this project.</p></section><section class="chapter"><h3 id="custom-a-star" data-toc="custom-a-star">Custom A-Star</h3><p id="637badd9_6897">The pathfinding algorithm used in Unreal is the &quot;detour&quot; algorithm which is significantly more computationally expensive than a basic a-star algorithm.</p><p id="637badd9_6898">Not recommended as this loses compatibility with all UE5 tools and lack of documentation in engine/online.</p></section></section><div class="last-modified"> Last modified: 25 November 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="implementation.html">Implementation</a>   <a class="navigation-links__next" href="benchmarks.html">Benchmarks</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.js"></script></body></html>